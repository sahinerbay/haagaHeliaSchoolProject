"use strict";$(function(){var a=function(){var a=$(".container");return{amica:function(){a.append('\n                <div class="amica amica--width-50">\n                    <div class="amica__center-center">\n                        <img class="amica__center-center__logo" src="./image/amica-brand-logo.png" alt="amica logo">\n                        <a href="" class="amica__center-center__button" title="Check Amica Lunch Options">Enter</a>\n                    </div>\n                </div>\n            ')},haaga:function(){a.append('\n                <div class="haaga haaga--width-50">\n                    <div class="haaga__center-center">\n                        <img class="haaga__center-center__logo" src="./image/haaga-helia-logo.png" alt="haaga-helia logo">\n                        <a href="" class="haaga__center-center__button" title="Read More Information About Haaga-Helia">Enter</a>\n                    </div>\n                </div>\n            ')}}}();a.amica(),a.haaga();var e={$amicaHome:$(".amica__center-center__button"),$haagaHome:$(".haaga__center-center__button")},t={container:$(".amica"),center:$(".amica__center-center"),center_logo:$(".amica__center-center__logo")},n={container:$(".haaga"),center:$(".haaga__center-center"),center_logo:$(".haaga__center-center__logo")},o={restaurantInfo:function(a){return axios.get(a).then(function(a){return a.data}).catch(function(a){console.log(a)})},lunchInfo:function(a){return axios.get(a).then(function(a){return a.data}).catch(function(a){console.log(a)})}},r=function(){var a={method:"flickr.photos.search",api_key:"a2cf3fa7a12e171dbd210236313bf095",tags:"haaga-helia",format:"json",perPage:50,plainJSON:"nojsoncallback=1"},e="https://api.flickr.com/services/rest/?method="+a.method+"&api_key="+a.api_key+"&tags="+a.tags+"&per_page="+a.perPage+"&format="+a.format+"&"+a.plainJSON;return{getPhotos:function(){return axios.get(e).then(function(a){return a.data}).catch(function(a){console.log(a)})},buildThumbnailUrl:function(a){return"https://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_q.jpg"},addContent:function(a){return $('<div class="row__small-4 row__medium-3 row__large-2">\n                        <img src="'+a+'">                \n                    </div>')}}}(),c=function(){var a=new Date,e=a.getHours()+1,t=a.getMinutes(),n=$('<p class = "amica__top-center__restaurant-info__isOpen"></p>');10==e?t>=30&&t<=59?n.text("OPEN!"):n.text("CLOSED!"):e>=11&&e<14&&n.text("OPEN!"),n.insertAfter(".amica__top-center__restaurant-info__time")},i=function(a){var e=$("\n        <div class = 'footer'>\n            <div class = 'footer--absolute'>\n                <a class = 'footer__button-"+a+"'>Go Back</a>    \n            </div>\n        </div>\n    ");$("."+a+"--width-100").append(e)},_=function(a){var e=new Date,t=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return a&&n<10&&(n="0"+n),o+"-"+n+"-"+t},s=function(){var a=(new Date).getDay();0==a?a=6:a-=1;for(var e=0;e<7;e++)console.log("hello"),e!=a&&$(".row > div").eq(e).css({opacity:".3"})},l=function(){return $('<div class="row row__small row__medium row__large"></div>')},m=_(!1),d={amicaHomeButton:function(a){a.preventDefault(),t.container.removeClass("amica--width-50").addClass("amica--width-100 amica--relative"),n.container.removeClass("haaga--width-50").addClass("haaga--width-0"),t.center.removeClass("amica__center-center").addClass("amica__top-center"),t.center_logo.removeClass("amica__center-center__logo").addClass("amica__top-center__logo"),e.$amicaHome.fadeOut(0),o.restaurantInfo("http://www.amica.fi/modules/json/json/Index?costNumber=0084&language=en").then(function(a){var e=$('<div class="amica__top-center__restaurant-info">\n                            <h1 class="amica__top-center__restaurant-info__name">'+a.RestaurantName+'</h1>\n                            <p class="amica__top-center__restaurant-info__link"><a href="'+a.RestaurantUrl+'" target="_blank">Website</a></p>\n                        </div>');$(".amica__top-center").append(e);var t=$(".amica__top-center__restaurant-info"),n=$('<p class="amica__top-center__restaurant-info__time">Closed!</p>');t.append(n);var o=_(!0);a.MenusForDays.forEach(function(a,e){-1!=a.Date.search(o)&&(n.text(a.LunchTime),c())})}).catch(function(a){console.log(a)}),o.lunchInfo("http://www.amica.fi/api/restaurant/menu/week?language=en&restaurantPageId=6143&weekDate="+m).then(function(a){var e=$('<div class="row row__small row__medium row__large"></div>');a.LunchMenus.forEach(function(a){var n=$('<div class="row__small-12 row__medium-6 row__large-3"</div>');a.Html?n.append("<h3>"+a.DayOfWeek+" ("+a.Date+")</h3>",a.Html):n.append("<h3>"+a.DayOfWeek+" ("+a.Date+")</h3>","<p>The Restaurant Closed!</p>"),e.append(n),t.container.append(e)}),$(".amica td").removeAttr("width valign"),s(),i("amica")})},haagaHomeButton:function(a){a.preventDefault(),t.container.removeClass("amica--width-50").addClass("amica--width-0"),n.container.removeClass("haaga--width-50").addClass("haaga--width-100 haaga--relative"),n.center.removeClass("haaga__center-center").addClass("haaga__top-center"),n.center_logo.removeClass("haaga__center-center__logo").addClass("haaga__top-center__logo"),e.$haagaHome.fadeOut(0),r.getPhotos().then(function(a){var e=l();a.photos.photo.forEach(function(a){var t=r.buildThumbnailUrl(a);e.append(r.addContent(t))}),n.container.append(e),i("haaga")})},amicaReturnButton:function(a){a.preventDefault(),t.container.removeClass("amica--width-100 amica--relative").addClass("amica--width-50");var o=$(".amica__top-center"),r=$(".amica__top-center__logo");o.removeClass("amica__top-center").addClass("amica__center-center"),r.removeClass("amica__top-center__logo").addClass("amica__center_center__logo"),n.container.removeClass("haaga--width-0").addClass("haaga--width-50"),$(".footer").remove(),$(".row").remove(),$(".amica__top-center__restaurant-info").remove(),e.$amicaHome.fadeIn(0)},haagaReturnButton:function(a){a.preventDefault(),n.container.removeClass("haaga--width-100 haaga--relative").addClass("haaga--width-50");var o=$(".haaga__top-center"),r=$(".haaga__top-center__logo");o.removeClass("haaga__top-center").addClass("haaga__center-center"),r.removeClass("haaga__top-center__logo").addClass("haaga__center_center__logo"),t.container.removeClass("amica--width-0").addClass("amica--width-50"),$(".footer").remove(),$(".row").remove(),e.$haagaHome.fadeIn(0)}};e.$amicaHome.on("click",d.amicaHomeButton),e.$haagaHome.on("click",d.haagaHomeButton),t.container.on("click",".footer__button-amica",d.amicaReturnButton),n.container.on("click",".footer__button-haaga",d.haagaReturnButton)});