<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hacker News API XMLHttpRequest with Promises</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let loadJSON = (url, callback) => {
            let xhttp = new XMLHttpRequest();
          
            xhttp.onload = () => {
              if (xhttp.readyState === 4) { // XMLHttpRequest.DONE
                if (xhttp.status === 200) {
                    xhttp.responseType = "json";
                  callback(xhttp.responseText);
                } else console.log(`status: ${xhttp.status} and status-text: ${xhttp.statusText}`);
              }
            };
          
            //onerror fires when there is  a denied cross-domain request
            xhttp.onerror = () => {
              console.log(`status: ${xhttp.status} and status-text: ${xhttp.statusText}`);
            };
          
            xhttp.open("GET", url); //leave empty or false for Asynchronous
            xhttp.send();
          }
          
          let processData = (dataJSON) => {
            let resultObj = JSON.parse(dataJSON); //converts JSON to Object Deserializing
            resultObj.forEach(function(value) {
              let para = document.createElement('p'),
                  txtNode = document.createTextNode(value);
              para.appendChild(txtNode);
              document.body.appendChild(para);
            });
          }
          
          loadJSON("https://hacker-news.firebaseio.com/v0/topstories.json", processData);
    </script>
</head>

<body>

</body>

</html>